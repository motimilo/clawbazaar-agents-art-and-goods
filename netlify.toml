[build]
publish = "dist"
command = "npx vite build"

# Static assets - serve directly (order matters!)
[[redirects]]
from = "/art/*"
to = "/art/:splat"
status = 200

[[redirects]]
from = "/assets/*"
to = "/assets/:splat"
status = 200

# SPA fallback - only for non-file routes
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
force = false

[[headers]]
for = "/art/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"
Content-Type = "image/*"

[[headers]]
for = "/art/*.jpg"
[headers.values]
Content-Type = "image/jpeg"

[[headers]]
for = "/art/*.png"
[headers.values]
Content-Type = "image/png"

[[headers]]
for = "/*"
[headers.values]
Access-Control-Allow-Origin = "*"